<header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><i class="fas fa-bars"></i></a>
        <%- partial('_partial/menu', {page:page}) %>
      </nav>
      <nav id="sub-nav">
        <a onclick="cambiarLenguaje(event, 'es');" data-lang="es" id="es-btn" class="nav-icon" title="EspaÃ±ol"><%- image_tag("img/es.gif") %></a>
        <a onclick="cambiarLenguaje(event, 'en');" data-lang="en" id="en-btn" class="nav-icon" title="English"><%- image_tag("img/en.gif") %></a>
        <a onclick="cambiarLenguaje(event, 'de');" data-lang="de" id="de-btn" class="nav-icon" title="Deutsche"><%- image_tag("img/de.gif") %></a>
        &nbsp;&nbsp;
      </nav>
      <script>
        function cambiarLenguaje(e, linkLang){
          e = e || window.event;

          // var urlLang = window.location.pathname.substring(1,3);
          var expReg = /\/((es)|(en)|(de))\//;
          var match = expReg.exec(window.location.pathname);
          if(!match){
            console.log("No esta definido el lenguaje");
            window.location.pathname = `/${linkLang}`
          }
          else{
            var urlLang = match[1]
            if( urlLang != linkLang){
              // window.location.pathname = window.location.pathname.replace(urlLang, linkLang);
              window.location.pathname = window.location.pathname.replace(expReg, `/${linkLang}/`)
            }
          }
        }

      </script>
    </div>
  </div>
</header>